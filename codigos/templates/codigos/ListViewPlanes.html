{% extends 'base.html'%}

{%block content%}

	<style type="text/css">	
		th, td {
			text-align: center;
		}
	</style>

	<h2>Lista de Planes</h2>

	{%if request.user.is_staff%}

	<a href="{%url 'codigos:CreateViewPlan'%}">Crear plan</a>

	{%endif%}

	<div class="table-responsive text-center">
		<table class="table">
			<thead>
				<th>Nombre</th>
				<th>Duraci칩n</th>
				<th>Precio</th>
				<th>C칩digos disponibles</th>
				<th {%if request.user.is_staff%} colspan="3" {%endif%}>Acciones</th>
			</thead>
			<tbody>

	{%for plan in planes%}

				<tr>
					<td>{{plan.nombre}}</td>
					<td>{{plan.duracion}} {%if plan.unidad_duracion == 1%} hora(s) {%elif plan.unidad_duracion == 2%} dia(s) {%elif plan.unidad_duracion == 3%} semanas(s) {%elif plan.unidad_duracion == 4%} mese(s) {%elif plan.unidad_duracion == 5%} a침o(s) {%endif%}</td>
					<td>${{plan.precio}} MXN</td>
					<td>{%if plan.CodigosDisponibles.codigos_disponibles is None%} {{plan.codigos_disponibles}} {%endif%}</td>
					<td><a href="{%url 'codigos:ListViewCodigos' plan.slug%}">Ver c칩digos</a></td>

					{%if request.user.is_staff%}

					<td><a href="{%url 'codigos:UpdateViewPlan' plan.slug%}">Actualizar</a></td>
					<td><a href="{%url 'codigos:DeleteViewPlan' plan.slug%}">Borrar</a></td>

					{%endif%}
				</tr>
	
	{%empty%}
	
				<tr>
					<td colspan="4">No hay planes</td>
				</tr>

	{%endfor%}

			</tbody>
		</table>
	</div>

{%endblock content%}